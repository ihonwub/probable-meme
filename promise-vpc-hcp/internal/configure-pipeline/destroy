#!/usr/bin/env sh
set -euo pipefail

echo "üß® Starting resource.delete..."

# Read the VPC name from status
vpcName=$(yq '.status.vpcName' /kratix/input/object.yaml)
region="us-east-1"

if [ -z "$vpcName" ]; then
  echo "‚ùå No VPC name found in status ‚Äî cannot continue with delete."
  exit 0  # Use exit 0 to allow graceful deletion when no status is present
fi

# NOTE: Kratix deletes the relevant .tf file automatically.
# You don't need to write to /kratix/output ‚Äî it will be ignored.
echo "‚ÑπÔ∏è Kratix will delete the Terraform config for VPC: ${vpcName}"

# Optional: Add logging or side-effect cleanup here
# e.g., notify external systems, delete out-of-band resources, etc.

echo "‚úÖ resource.delete complete."
